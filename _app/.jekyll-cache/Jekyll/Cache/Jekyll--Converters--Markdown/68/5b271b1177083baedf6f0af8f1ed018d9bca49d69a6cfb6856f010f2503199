I"ÕF<h2 id="overview">Overview</h2>

<p>You can create your own theme in AMSF, theme files are located in the following location (I use default theme Curtana here for better understanding):</p>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>â”œâ”€â”€ _app/
|   â”œâ”€â”€ _data/
|   |   â””â”€â”€ curtana.yml
|   â”œâ”€â”€ _includes/
|   |   â””â”€â”€ themes/
|   |   |   â””â”€â”€ curtana/
|   |   |   |   â””â”€â”€ includes/
|   |   |   |   â””â”€â”€ layouts/
|   â”œâ”€â”€ _pages/
|   |   â””â”€â”€ themes/
|   |   |   â””â”€â”€ curtana/
|   |   |   |   â””â”€â”€ example-page.md
|   |   |   |   â””â”€â”€ ...
|   â”œâ”€â”€ assets/
|   |   â””â”€â”€ themes/
|   |   |   â””â”€â”€ curtana/
|   |   |   |   â””â”€â”€ _js/
|   |   |   |   â””â”€â”€ _scss/
|   |   |   |   â””â”€â”€ ...
</code></pre></div></div>

<p>The theme specific config <code class="language-plaintext highlighter-rouge">curtana.yml</code> should have the same filename as your theme name. It should contain theme-specific variables and can also override AMSF built-in settings.</p>

<p>More info about theme structure you can check out my default theme <a href="https://github.com/amsf/amsf-curtana">Curtana</a>.</p>

<p>You can also have multiple themes in your project, as many as you like. For example if you also have themes Bootstrap and Ghost installed, the file structure should be:</p>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>â”œâ”€â”€ _app/
|   â”œâ”€â”€ _data/
|   |   â””â”€â”€ bootstrap.yml
|   |   â””â”€â”€ curtana.yml
|   |   â””â”€â”€ ghost.yml
|   â”œâ”€â”€ _includes/
|   |   â””â”€â”€ themes/
|   |   |   â””â”€â”€ bootstrap/
|   |   |   |   â””â”€â”€ includes/
|   |   |   |   â””â”€â”€ layouts/
|   |   |   â””â”€â”€ curtana/
|   |   |   |   â””â”€â”€ includes/
|   |   |   |   â””â”€â”€ layouts/
|   |   |   â””â”€â”€ ghost/
|   |   |   |   â””â”€â”€ includes/
|   |   |   |   â””â”€â”€ layouts/
|   â”œâ”€â”€ _pages/
|   |   â””â”€â”€ themes/
|   |   |   â””â”€â”€ bootstrap/
|   |   |   |   â””â”€â”€ example-about.md
|   |   |   |   â””â”€â”€ example-blog.md
|   |   |   |   â””â”€â”€ example-fluid-container.md
|   |   |   |   â””â”€â”€ ...
|   |   |   â””â”€â”€ curtana/
|   |   |   |   â””â”€â”€ example-about.md
|   |   |   |   â””â”€â”€ example-news.md
|   |   |   |   â””â”€â”€ ...
|   |   |   â””â”€â”€ ghost/
|   |   |   |   â””â”€â”€ example-archive.md
|   |   |   |   â””â”€â”€ example-page.md
|   |   |   |   â””â”€â”€ example-tagcloud.md
|   |   |   |   â””â”€â”€ ...
|   â”œâ”€â”€ assets/
|   |   â””â”€â”€ themes/
|   |   |   â””â”€â”€ bootstrap/
|   |   |   |   â””â”€â”€ _coffee/
|   |   |   |   â””â”€â”€ _scss/
|   |   |   |   â””â”€â”€ images/
|   |   |   â””â”€â”€ curtana/
|   |   |   |   â””â”€â”€ _js/
|   |   |   |   â””â”€â”€ _scss/
|   |   |   |   â””â”€â”€ svg/
|   |   |   â””â”€â”€ ghost/
|   |   |   |   â””â”€â”€ _js/
|   |   |   |   â””â”€â”€ _less/
|   |   |   |   â””â”€â”€ fonts/
...
</code></pre></div></div>

<h2 id="amsf-options">AMSF Options</h2>

<p>Thereâ€™re several built-in options you can use in your theme. These options can also be overridden in theme-specific config.</p>

<h3 id="sitename"><code class="language-plaintext highlighter-rouge">site.name</code></h3>

<p>Template:</p>

<div class="language-html highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nt">&lt;footer</span> <span class="na">class=</span><span class="s">"footer"</span><span class="nt">&gt;</span>
  <span class="nt">&lt;ul&gt;</span>
    <span class="nt">&lt;li&gt;&lt;a</span> <span class="na">href=</span><span class="s">"/"</span><span class="nt">&gt;</span>{{ site.name }}<span class="nt">&lt;/a&gt;&lt;/li&gt;</span>
    <span class="nt">&lt;li&gt;&lt;a</span> <span class="na">href=</span><span class="s">"/atom.xml"</span><span class="nt">&gt;</span>Atom<span class="nt">&lt;/a&gt;&lt;/li&gt;</span>
  <span class="nt">&lt;/ul&gt;</span>
<span class="nt">&lt;/footer&gt;</span>
</code></pre></div></div>

<p>Output:</p>

<div class="language-html highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nt">&lt;footer</span> <span class="na">class=</span><span class="s">"footer"</span><span class="nt">&gt;</span>
  <span class="nt">&lt;ul&gt;</span>
    <span class="nt">&lt;li&gt;&lt;a</span> <span class="na">href=</span><span class="s">"/"</span><span class="nt">&gt;</span>Almace Scaffolding<span class="nt">&lt;/a&gt;&lt;/li&gt;</span>
    <span class="nt">&lt;li&gt;&lt;a</span> <span class="na">href=</span><span class="s">"/atom.xml"</span><span class="nt">&gt;</span>Atom<span class="nt">&lt;/a&gt;&lt;/li&gt;</span>
  <span class="nt">&lt;/ul&gt;</span>
<span class="nt">&lt;/footer&gt;</span>
</code></pre></div></div>

<h3 id="sitedescription"><code class="language-plaintext highlighter-rouge">site.description</code></h3>

<p>Site description will appear in the document meta and Atom feed subtitle.</p>

<p>Template:</p>

<div class="language-html highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nt">&lt;meta</span> <span class="na">property=</span><span class="s">"og:description"</span> <span class="na">content=</span><span class="s">"{{ site.description }}"</span><span class="nt">&gt;</span>
</code></pre></div></div>

<p>Output:</p>

<div class="language-html highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nt">&lt;meta</span> <span class="na">property=</span><span class="s">"og:description"</span> <span class="na">content=</span><span class="s">"A super-fast Jekyll framework fighting against the website obesity."</span><span class="nt">&gt;</span>
</code></pre></div></div>

<h3 id="sitefile"><code class="language-plaintext highlighter-rouge">site.file</code></h3>

<p>Media assets URL used in posts, without trailing slash. In most cases this URL should be powered by a CDN provider.</p>

<p>Config:</p>

<div class="language-yaml highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="na">file</span><span class="pi">:</span> <span class="s">//d349cztnlupsuf.cloudfront.net</span>
</code></pre></div></div>

<p>Template:</p>

<div class="language-html highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nt">&lt;img</span> <span class="na">src=</span><span class="s">"{{ site.file }}/post-thumbnail.jpg"</span><span class="nt">&gt;</span>
</code></pre></div></div>

<p>Output:</p>

<div class="language-html highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nt">&lt;img</span> <span class="na">src=</span><span class="s">"//d349cztnlupsuf.cloudfront.net/post-thumbnail.jpg"</span><span class="nt">&gt;</span>
</code></pre></div></div>

<h3 id="sitetwitter"><code class="language-plaintext highlighter-rouge">site.twitter</code></h3>

<p>Site Twitter account handle.</p>

<p>Template:</p>

<div class="language-html highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nt">&lt;a</span> <span class="na">href=</span><span class="s">"https://twitter.com/{{ site.twitter }}"</span><span class="nt">&gt;</span>Follow @{{ site.twitter }} on Twitter<span class="nt">&lt;/a&gt;</span>
</code></pre></div></div>

<p>Output:</p>

<div class="language-html highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nt">&lt;a</span> <span class="na">href=</span><span class="s">"https://twitter.com/sparanoid"</span><span class="nt">&gt;</span>Follow @sparanoid on Twitter<span class="nt">&lt;/a&gt;</span>
</code></pre></div></div>

<h3 id="siteforce_utf_8"><code class="language-plaintext highlighter-rouge">site.force_utf_8</code></h3>

<p>Force UTF-8 encoding, enable this will simply add <code class="language-plaintext highlighter-rouge">&lt;meta charset="utf-8"&gt;</code> to the head of your pages.</p>

<p>Template:</p>

<div class="language-html highlighter-rouge"><div class="highlight"><pre class="highlight"><code>{% if site.force_utf_8 %}
  <span class="nt">&lt;meta</span> <span class="na">charset=</span><span class="s">"utf-8"</span><span class="nt">&gt;</span>
{% endif %}
</code></pre></div></div>

<h3 id="siterobots"><code class="language-plaintext highlighter-rouge">site.robots</code></h3>

<p>You can define your own records in <code class="language-plaintext highlighter-rouge">robots.txt</code>.</p>

<p>Config:</p>

<div class="language-yaml highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="na">robots</span><span class="pi">:</span>
  <span class="pi">-</span> <span class="s2">"</span><span class="s">User-agent:</span><span class="nv"> </span><span class="s">*"</span>
  <span class="pi">-</span> <span class="s2">"</span><span class="s">Disallow:</span><span class="nv"> </span><span class="s">/ajax/"</span>
  <span class="pi">-</span> <span class="s2">"</span><span class="s">Disallow:</span><span class="nv"> </span><span class="s">/@async"</span>
  <span class="pi">-</span> <span class="s2">"</span><span class="s">Disallow:</span><span class="nv"> </span><span class="s">/log/"</span>
</code></pre></div></div>

<h2 id="theme-features">Theme Features</h2>

<p>Thereâ€™re some features can be integrated into your theme.</p>

<h3 id="basic-multi-language-support">(Basic) Multi-Language Support</h3>

<p>You can define post/page language in your front-matter field:</p>

<div class="language-yaml highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="na">lang</span><span class="pi">:</span>
  <span class="pi">-</span> <span class="s">zh-tw</span>
</code></pre></div></div>

<p>An additional <code class="language-plaintext highlighter-rouge">lang</code> HTML attribute will be added to your final rendering:</p>

<div class="language-html highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nt">&lt;article</span> <span class="na">lang=</span><span class="s">"zh-tw"</span><span class="nt">&gt;</span>
  ...
<span class="nt">&lt;/article&gt;</span>
</code></pre></div></div>

<p>If your post/page content is multilingual, you can also define multiple languages in array:</p>

<div class="language-yaml highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="na">lang</span><span class="pi">:</span>
  <span class="pi">-</span> <span class="s">zh-tw</span>
  <span class="pi">-</span> <span class="s">en-us</span>
</code></pre></div></div>

<p>Please note that only the first item defined in <code class="language-plaintext highlighter-rouge">lang</code> array will be used in final <code class="language-plaintext highlighter-rouge">lang</code> output, the additional languages will be available in JSON feed output:</p>

<div class="language-json highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="p">{</span><span class="w">
  </span><span class="nl">"languages"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="s2">"zh-tw"</span><span class="p">,</span><span class="w"> </span><span class="s2">"en-us"</span><span class="p">],</span><span class="w">
  </span><span class="nl">"categories"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="s2">"note"</span><span class="p">],</span><span class="w">
  </span><span class="nl">"tags"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="s2">"miscellaneous"</span><span class="p">]</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre></div></div>

<h3 id="smooshing-assets">Smooshing Assets</h3>

<p>For better performance, Almace Scaffolding will find all the CSS, script links and images in compiled HTML, and outputs a version with all the CSS, scripts and images (Base64) written inline. Sounds cool? but it needs theme support. Hereâ€™s how:</p>

<p>You can simply add the query string <code class="language-plaintext highlighter-rouge">?assets-inline</code> at the end of the file youâ€™d like to be inlined in production site:</p>

<div class="language-html highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="c">&lt;!-- This CSS will be inlined into HTML --&gt;</span>
<span class="nt">&lt;link</span> <span class="na">rel=</span><span class="s">"stylesheet"</span> <span class="na">href=</span><span class="s">"{{ '/css/app.css?assets-inline' | prepend: amsf_theme_assets }}"</span><span class="nt">&gt;</span>

<span class="c">&lt;!-- This script will be inlined into HTML --&gt;</span>
<span class="nt">&lt;script </span><span class="na">src=</span><span class="s">"{{ '/js/app.js?assets-inline' | prepend: amsf_theme_assets }}"</span><span class="nt">&gt;&lt;/script&gt;</span>
</code></pre></div></div>

<h3 id="user-custom-styles-support">User Custom Styles Support</h3>

<p>Define the following code snippet into your theme styles (Sass) will allow users to custom your theme without touching the theme files:</p>

<div class="language-css highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="o">//</span> <span class="nt">Import</span> <span class="nt">user</span> <span class="nt">custom</span> <span class="nt">styles</span>
<span class="k">@import</span> <span class="s1">"../../../_scss/custom"</span><span class="p">;</span>
</code></pre></div></div>

<h3 id="user-custom-scripts-support">User Custom Scripts Support</h3>

<p>Define the following code snippet into your theme template (itâ€™s recommended to put it in footer) will allow users to add custom scripts without touching the theme files:</p>

<div class="language-html highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="c">&lt;!-- User custom scripts --&gt;</span>
<span class="nt">&lt;script </span><span class="na">src=</span><span class="s">"{{ '/js/user.js?assets-inline' | prepend: amsf_user_assets }}"</span><span class="nt">&gt;&lt;/script&gt;</span>
</code></pre></div></div>

<h3 id="page--post-specific-css-block-support">Page / Post Specific CSS Block Support</h3>

<p>This allows your user to define page / post specific CSS blocks in front-matter data:</p>

<div class="language-html highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="c">&lt;!-- Page-wide custom CSS --&gt;</span>
{{ amsf_page_css }}
</code></pre></div></div>

<h3 id="google-analytics-support">Google Analytics Support</h3>

<p>This allows your user to be able to use Google Analytics for their site, tracking ID can be changed in the config file:</p>

<div class="language-html highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="c">&lt;!-- Google Analytics tracking code --&gt;</span>
{{ amsf_google_analytics }}
</code></pre></div></div>

<h3 id="post-published-time">Post Published Time</h3>

<p>This allows you to get the published time of the current post.</p>

<p>Template:</p>

<div class="language-html highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nt">&lt;meta</span> <span class="na">property=</span><span class="s">"article:published_time"</span> <span class="na">content=</span><span class="s">"{{ amsf_page_pubdate | date_to_xmlschema }}"</span><span class="nt">&gt;</span>
</code></pre></div></div>

<p>Output:</p>

<div class="language-html highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nt">&lt;meta</span> <span class="na">property=</span><span class="s">"article:published_time"</span> <span class="na">content=</span><span class="s">"2014-01-01T00:00:00+08:00"</span><span class="nt">&gt;</span>
</code></pre></div></div>

<h3 id="post-modified-time">Post Modified Time</h3>

<p>This allows you to get the modified time of the current post.</p>

<p>Template:</p>

<div class="language-html highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nt">&lt;meta</span> <span class="na">property=</span><span class="s">"article:modified_time"</span> <span class="na">content=</span><span class="s">"{{ amsf_page_update | date_to_xmlschema }}"</span><span class="nt">&gt;</span>
</code></pre></div></div>

<p>Output:</p>

<div class="language-html highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nt">&lt;meta</span> <span class="na">property=</span><span class="s">"article:modified_time"</span> <span class="na">content=</span><span class="s">"2014-01-03T03:17:49+08:00"</span><span class="nt">&gt;</span>
</code></pre></div></div>

<h3 id="post-reading-time">Post Reading Time</h3>

<p>This allows you to show the average reading time of current post.</p>

<p>Template:</p>

<div class="language-html highlighter-rouge"><div class="highlight"><pre class="highlight"><code>Reading time: {{ amsf_page_reading_time }}
</code></pre></div></div>

<p>Output:</p>

<div class="language-md highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="gh"># Less than 200 words</span>
Reading time: Less than 1 min

<span class="gh"># Around 200 words</span>
Reading time: 1 min

<span class="gh"># More than 200 words</span>
Reading time: 34 mins

<span class="gh"># More than 1 hour</span>
Reading time: 1 hr
Reading time: 1 hr 1 min
Reading time: 3 hrs 20 mins
</code></pre></div></div>

<h2 id="publishing-themes">Publishing Themes</h2>

<p>You really like your custom design and wanna show it off to the world? Cool, you can create (pack) you own theme by the following command:</p>

<div class="language-sh highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nv">$ </span>grunt theme-save
</code></pre></div></div>

<p>The activated theme will be saved to AMSF cache (<code class="language-plaintext highlighter-rouge">.amsf-cache/</code>) with correct file and directory structure, then you can upload your theme to GitHub.</p>

<p>Still confusing? see my default theme <a href="https://github.com/amsf/amsf-curtana">Curtana</a> for reference.</p>
:ET